<mat-card >
  <mat-card-header>
    <mat-card-subtitle>{{ currentEventTxt }}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
  <form [formGroup]="form">
	<!-- compPrefix; compName; compNum; -->
	<!-- fecomp_txa; action; slug; -->
	<!-- description;  -->
	<!-- sector; estado; avance; ts_alta; ts_fin; ts_prog;  -->

		<!-- fecomp_txa; action; slug;  : 'far fa-plus'-->

    <div class="row">
      <div class="col-sm-12 col-md-3">
        <mat-form-field>
          <mat-select #fldTdoc placeholder="Tipo de documento" 
            [formControl]="form.controls['tdoc']"
            (selectionChange)="changeSelectionValue('tdoc',fldTdoc.value)">
            <mat-option *ngFor="let item of tcompPersonaFisica" [value]="item.val">{{ item.label }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-sm-12 col-md-4">
        <mat-form-field>
          <input matInput [formControl]="form.controls['ndoc']" placeholder="Número documento">
        </mat-form-field>
      </div>

      <div class="col-sm-12 col-md-4">
        <mat-form-field>
          <input matInput [formControl]="form.controls['telefono']" placeholder="Teléfono de contacto">
        </mat-form-field>
      </div>
    </div>



    <div class="row">
      <div class="col-md-3 d-flex align-items-center">
        <span class="text-normal">¿Tuvo más de 38 grados de fiebre?</span>
      </div>
      <div class="col-md-5 d-flex align-items-center">
        <mat-radio-group  formControlName="fiebreRB" aria-label="Signo de fiebre en los últimos 14 días">
          <mat-radio-button 
                [checked]="form.controls['fiebreRB'].value===1" 
                value="1">Verificó fiebre</mat-radio-button>
          <mat-radio-button 
                [checked]="form.controls['fiebreRB'].value===2" 
                value="2">Cree que tuvo fiebre</mat-radio-button>
          <mat-radio-button 
                [checked]="form.controls['fiebreRB'].value===3" 
                value="3" >No tuvo fiebre</mat-radio-button>
        </mat-radio-group>
      </div>

      <div class="col-md-1">
        <mat-form-field>
          <input  matInput type="number" min="35" max="44" 
                  formControlName="fiebre" placeholder="Fiebre verificada en grados" >
        </mat-form-field>
      </div>

    </div>


    <div class="row">
      <div class="col-md-3 d-flex align-items-center">
        <span class="text-normal">¿Tuvo alguno de estos síntomas?</span>
      </div>
      <div class="col-md-2 d-flex align-items-center" 
          title="Síntomas vinculados al COVID en los últimos 14 días">
          <mat-checkbox 
                [checked]="form.controls['hasDifRespiratoria'].value===true"
                [formControl]="form.controls['hasDifRespiratoria']" >
                  Dificultad respiratoria</mat-checkbox>
      </div>
      <div class="col-md-2 d-flex align-items-center" >
          <mat-checkbox 
                [checked]="form.controls['hasDolorGarganta'].value===true"
                [formControl]="form.controls['hasDolorGarganta']" >
                  Dolor de garganta
                </mat-checkbox>
      </div>
      <div class="col-md-1 d-flex align-items-center" >
          <mat-checkbox 
                [checked]="form.controls['hasTos'].value===true"
                [formControl]="form.controls['hasTos']" >
                  Tos
                </mat-checkbox>
      </div>

      <div class="col-md-4">
        <mat-form-field>
          <input  matInput  
                  formControlName="sintomas" placeholder="Describa síntomas" >
        </mat-form-field>
      </div>

    </div>

    <div class="row">
      <div class="col-md-3 d-flex align-items-center">
        <span class="text-normal">¿Se verifican estas situaciones?</span>
      </div>
      <div class="col-md-2 d-flex align-items-center" >
          <mat-checkbox 
                [checked]="form.controls['hasViaje'].value===true"
                [formControl]="form.controls['hasViaje']" >
                  ¿Estuvo de viaje?</mat-checkbox>
      </div>
      <div class="col-md-3 d-flex align-items-center" >
          <mat-checkbox 
                [checked]="form.controls['hasContacto'].value===true"
                [formControl]="form.controls['hasContacto']" >
                  ¿Tuvo contacto con persona c/COVID?
                </mat-checkbox>
      </div>
      <div class="col-md-3 d-flex align-items-center" >
          <mat-checkbox 
                [checked]="form.controls['hasEntorno'].value===true"
                [formControl]="form.controls['hasEntorno']" >
                  ¿Hay casos de COVID en su entorno?
                </mat-checkbox>
      </div>
    </div>

    <div class="row">
      <div class="col-md-3 d-flex align-items-center">
        <span class="text-normal">¿Refiere otras situaciones?</span>
      </div>
      <div class="col-md-8">
        <mat-form-field>
          <input  matInput  
                  formControlName="contexto" placeholder="Describa su contexto" >
        </mat-form-field>
      </div>

    </div>

    <div class="row" >
      <div class="col">
        <mat-form-field>
          <textarea matInput [formControl]="form.controls['description']" placeholder="Observaciones" >
          </textarea> 
        </mat-form-field>
      </div>
    </div>

    <hr>

    <!------------- pasa a followUP
    <div class="row">
      <div class="col-sm-12 col-md-12">
          <div class="d-flex justify-content-between panel-header">

          <div class="panel-header-text">{{ novedadesTitle }}</div>
          <div class="panel-header-control" ><span 
            (click)='addNovedad()' title="Agregar Novedad">
            <i [class]="'fas fa-plus'" 
              aria-hidden="true"></i></span></div>
        </div>
      </div>
    </div>
      
    <div class="novedades-container" formArrayName='novedades'>
    <ng-container *ngFor="let novedad of novedades.controls; let i=index" 
                  [formGroupName]="i">
      <div class="row d-flex align-items-center">
        <ng-container *ngIf="novedad.value._id">
          <div class="col-md-12">
          <p class='text-resaltado'>{{ getNovedadTxt(novedad.value) }}</p>
          <p class='text-audit'>{{ getAuditNovedad(novedad.value) }} </p>          
          </div>
        </ng-container>


        <ng-container *ngIf="!novedad.value._id">
        <div class="col-md-3">
          <mat-form-field>
            <mat-select #fldNovedad placeholder="Tipo de Novedad"
                formControlName="tnovedad" 
                (selectionChange)="changeSelectionValue('tnovedad',fldNovedad.value)" >
              <mat-option *ngFor="let item of novedadOptList" 
                [value]="item.val" >{{ item.label }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-md-7">
          <mat-form-field>
            <input matInput formControlName="novedad" placeholder="Novedad - Observación " >
          </mat-form-field>
        </div>
        </ng-container>

      </div>
    </ng-container>

    </div>
    ---------->

    

    <div class="row" >
      <div class="col">
        <mat-form-field>
          <mat-select #fldSector placeholder="Sector"
              [formControl]="form.controls['sector']"
              (selectionChange)="changeSelectionValue('sector',fldSector.value)" >
            <mat-option *ngFor="let item of sectorOptList" 
              [value]="item.val" >{{ item.label }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field>
          <mat-select #fldTipoAccion placeholder="Tipo de Acción"
              [formControl]="form.controls['action']"
              (selectionChange)="changeSelectionValue('action',fldTipoAccion.value)" >
            <mat-option *ngFor="let item of actionOptList" 
              [value]="item.val" >{{ item.label }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field>
          <input matInput [formControl]="form.controls['fecomp']" placeholder="Fecha emisión" >
        </mat-form-field>
      </div>
    </div>

    <div class="row" >
      <div class="col">
        <mat-form-field>
          <mat-select #fldAvance placeholder="Avance"
              [formControl]="form.controls['avance']"
              (selectionChange)="changeSelectionValue('avance',fldAvance.value)" >
            <mat-option *ngFor="let item of avanceOptList" 
              [value]="item.val" >{{ item.label }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col">
        <mat-form-field>
          <mat-select #fldEstado placeholder="Estado"
              [formControl]="form.controls['estado']"
              (selectionChange)="changeSelectionValue('estado',fldEstado.value)" >
            <mat-option *ngFor="let item of estadoOptList" 
              [value]="item.val" >{{ item.label }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <hr>
    <div class="additional-info">
      <button mat-raised-button color="primary" type="submit" 
          (click)="onSubmit()"
          [disabled]="!form.valid" >Aceptar</button>
      
      <button mat-button type="button" color="accent"
          (click)="onCancel()" >Cancelar</button>

      <!-- button mat-button type="button" color="warning"
          (click)="deleteToken()" >Borrar</button  -->

    </div>

</form>
</mat-card-content>
</mat-card>