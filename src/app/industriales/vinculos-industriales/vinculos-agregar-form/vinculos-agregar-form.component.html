<div class="view-port">
    <mat-card class="mat-elevation-z0 p-0">
        <mat-card-header>
            <mat-card-subtitle>Buscar organización existente o crear nueva</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <div class="buscar-box">
                <p  style="font-style: italic;" class="buscar-box2" >Buscar organización por CUIT o razón social</p>
                <div class="row m-1 p-2">
                    <div class="col-sm-12 col-md-6">
                        <mat-form-field>
                            <mat-select #fldTdocAlta placeholder="Tipo de documento" [(ngModel)]='tDoc' (selectionChange)="changeSelectionValue('tdoc',fldTdocAlta.value)">
                                <mat-option *ngFor="let item of tdocOptList" [value]="item.val">{{ item.label }}</mat-option>
                            </mat-select>
                            <mat-hint>Verifique si la organización ya está dada de alta</mat-hint>
                        </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-md-6">
                        <persona-buscar [tdoc]='tDoc' (person$)=handlePerson($event)></persona-buscar>
                    </div>
                </div>     
            </div>

            <form [formGroup]="form">
                <fieldset formGroupName="vinculoForm">

                    <div class="buscar-box">
                        <p  style="font-style: italic;" class="buscar-box2" >Datos básicos de la organización representada</p>

                        <div class="row">

                            <div class="col">
                                <mat-form-field>
                                    <mat-select #fldPersonType   formControlName='personType' (change)="changeSelectionValue('personType',fldPersonType )" placeholder="Forma jurídica">
                                        <mat-option *ngFor="let tper of persontypes" [value]="tper.val" >{{ tper.label }}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                              
                        
                            <div class="col">
                                <mat-form-field>
                                    <input matInput formControlName="displayName" placeholder="Razón social">
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <mat-form-field>
                                    <mat-select #fldTdoc placeholder="Tipo de identificación" formControlName="tdoc" (selectionChange)="changeSelectionValue('tdoc',fldTdoc.value)">
                                        <mat-option *ngFor="let item of tdocOptList" [value]="item.val">{{ item.label }}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <mat-form-field>
                                    <mat-placeholder>Número de documento</mat-placeholder>
                                    <input matInput formControlName="ndoc">
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <mat-form-field>
                                    <input matInput formControlName="telefono" placeholder="Teléfono">
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                </fieldset>

                <div class="d-md-flex justify-content-start">
                    <button mat-raised-button color="primary" class='m-1' [disabled]="!form.valid" (click)="onSubmit()">Aceptar</button>
                    <button mat-raised-button color="warn" class='m-1' (click)="onCancel()">Cancelar</button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>
